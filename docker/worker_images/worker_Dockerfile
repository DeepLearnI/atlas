FROM python:3.6

MAINTAINER Eric Kin Ho Lee

COPY ./foundations_requirements.txt /tmp/foundations_requirements.txt
COPY ./orbit_worker_requirements.txt /tmp/orbit_worker_requirements.txt
COPY ./run.sh /prejob/run.sh

RUN chmod +x /prejob/run.sh

RUN pip install --requirement /tmp/orbit_worker_requirements.txt
RUN rm /tmp/foundations_requirements.txt && rm /tmp/orbit_worker_requirements.txt

ENTRYPOINT ["/prejob/run.sh"]
